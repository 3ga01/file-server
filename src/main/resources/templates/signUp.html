<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Sign Up</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<style>
		body {
			font-family: Arial, sans-serif;
			background-color: #f2f2f2;
		}
		
		form {
			background-color: #ffffff;
			padding: 10px;
			margin: 0 auto;
			box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
			border-radius: 10px;
			width: 90%;
		}
		
		input[type=text], input[type=email], input[type=password] {
			width: 100%;
			padding: 12px 5px;
			margin: 8px 0;
			border-radius: 4px;
			 border: none;
			 margin-bottom: 20px;
		}
		
		button[type=submit] {
			background-color: #333;
			color: #ffffff;
			padding: 12px 20px;
			border: none;
			border-radius: 4px;
			cursor: pointer;
			float: right;
		}
		
		button[type=submit]:hover {
			background-color: #45a049;
		}

		 a{
      text-decoration: none;
      color: #012e5e;
    }
		
		.container {
			padding: 16px;
		}

		 h1 {
        text-align: center;
        margin-top: 0;
      }

		
		@media screen and (max-width: 600px) {
			form {
				max-width: 100%;
			}
		}
	</style>
</head>
<body>
	<form method="post" action="/adduser" th:object="${users}">
		<h1>Sign Up</h1>
		<div class="container">
			<label for="username"><b>Username</b></label>
   <input type="text" name = "name" required placeholder="Enter Name" />		
			<label for="email"><b>Email</b></label>
			<input type="email" placeholder="Enter Email" name = "email" required>
		
			<label for="psw"><b>Password</b></label>
			<input type="password" placeholder="Enter Password" name = "password" required id="password">
		
			<label for="psw-repeat"><b>Repeat Password</b></label>
			<input type="password" placeholder="Repeat Password" name="password-repeat" required id="confirm-password">
			
			<button type="submit">Sign Up</button>
		</div>
    <a th:href="@{/login}">Already a user? Sign in</a>

	</form>

	<script>
		// Get the password and confirm password fields
const passwordField = document.getElementById("password");
const confirmPasswordField = document.getElementById("confirm-password");

// Add an event listener to the confirm password field to check if it matches the password field
confirmPasswordField.addEventListener("input", function () {
  if (confirmPasswordField.value !== passwordField.value) {
    confirmPasswordField.setCustomValidity("Passwords do not match");
  } else {
    confirmPasswordField.setCustomValidity("");
  }
});

passwordField.addEventListener("input", function () {
  const pattern = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;

  if (pattern.test(passwordField.value)) {
    passwordField.setCustomValidity("");
  } else {
    passwordField.setCustomValidity("Password must contain at least one lowercase letter, one uppercase letter, one digit, one special character, and be at least 8 characters long.");
  }
});

	</script>

</body>
</html>
